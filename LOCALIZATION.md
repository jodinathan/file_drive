# Localization File Generation

## How It Works

The `app_localizations.dart` file is automatically generated by Flutter's built-in internationalization (l10n) system using the following configuration:

### Configuration Files

1. **`l10n.yaml`** - Main configuration file:
   ```yaml
   arb-dir: lib/src/l10n
   template-arb-file: app_en.arb
   output-localization-file: app_localizations.dart
   output-class: AppLocalizations
   output-dir: lib/src/l10n/generated
   nullable-getter: false
   use-deferred-loading: false
   ```

2. **ARB Files** - Application Resource Bundle files containing translations:
   - `lib/src/l10n/app_en.arb` - English (template)
   - `lib/src/l10n/app_pt.arb` - Portuguese
   - `lib/src/l10n/app_pt_BR.arb` - Portuguese (Brazil)

### Generation Process

1. **Trigger**: The generation happens automatically when you run:
   - `flutter pub get`
   - `flutter build`
   - `flutter run`

2. **Output**: Creates files in `lib/src/l10n/generated/`:
   - `app_localizations.dart` - Main abstract class with all localized strings
   - `app_localizations_en.dart` - English implementation
   - `app_localizations_pt.dart` - Portuguese implementation

### Dependencies

The generated code requires these dependencies in `pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  intl: ^0.20.2  # Must match flutter_localizations version
```

## Previous Issue and Resolution

**Problem**: The generated `app_localizations.dart` was trying to import `flutter_localizations` but this package wasn't in the dependencies, causing compilation errors.

**Root Cause**: The l10n configuration was malformed with duplicate keys and incorrect header settings.

**Resolution**:
1. Fixed the `l10n.yaml` configuration file
2. Added `flutter_localizations` dependency to `pubspec.yaml`
3. Updated `intl` package version to match `flutter_localizations` requirement (0.20.2)

## Usage in Code

To use the generated localizations:

```dart
import 'package:flutter/material.dart';
import 'src/l10n/generated/app_localizations.dart';

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      localizationsDelegates: AppLocalizations.localizationsDelegates,
      supportedLocales: AppLocalizations.supportedLocales,
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final l10n = AppLocalizations.of(context);
    return Scaffold(
      appBar: AppBar(
        title: Text(l10n.appTitle), // "File Cloud"
      ),
      body: Text(l10n.loading), // "Loading..."
    );
  }
}
```

## Adding New Translations

1. Add the new string to `app_en.arb`:
   ```json
   {
     "myNewString": "Hello World",
     "@myNewString": {
       "description": "A greeting message"
     }
   }
   ```

2. Add translations to other ARB files (`app_pt.arb`, etc.)

3. Run `flutter pub get` to regenerate the localization files

The new string will be available as `AppLocalizations.of(context).myNewString`.